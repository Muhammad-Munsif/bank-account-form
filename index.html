<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bank Account</title>
    <link rel="stylesheet" href="css/style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
      * {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: "Segoe UI", sans-serif;
}
body {
  background: #f5f7fa;
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 100vh;
  transition: background 0.3s;
}
body.dark {
  background: #1e1e2f;
  color: #f0f0f0;
}

.container {
  width: 90%;
  max-width: 500px;
  padding: 20px;
}

.bank-card {
  background: #fff;
  border-radius: 16px;
  padding: 30px 20px;
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
  text-align: center;
  transition: background 0.3s;
}

body.dark .bank-card {
  background: #2d2f40;
  color: white;
}

.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.toggle-btn {
  background: none;
  border: none;
  font-size: 20px;
  cursor: pointer;
}

.account-number,
.balance,
.welcome {
  margin: 10px 0;
}

#balance {
  font-weight: bold;
  color: #2e8b57;
}

body.dark #balance {
  color: #90ee90;
}

.btn-group {
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  margin: 20px 0;
}

.btn {
  flex: 1;
  padding: 12px;
  border: none;
  border-radius: 8px;
  background-color: #2e8b57;
  color: white;
  font-size: 16px;
  cursor: pointer;
  transition: background 0.3s;
}

.btn.secondary {
  background-color: #4b5563;
}

.btn.logout {
  background-color: #d9534f;
}

.btn:hover {
  opacity: 0.9;
}

.login-section input,
.login-section > button {
  width: 100%;
  padding: 10px;
  border-radius: 6px;
  border: 1px solid #ccc;
  margin-right: 10px;
  margin-top: 10px;
  font-size: 1.5rem;
}

.history {
  text-align: left;
  margin-top: 20px;
}

.history ul {
  list-style: none;
  padding-left: 0;
  max-height: 200px;
  overflow-y: auto;
}

.history ul li {
  font-size: 14px;
  padding: 6px 0;
  border-bottom: 1px solid #ccc;
}

body.dark .history ul li {
  border-color: #555;
}

.chart-container {
  margin-top: 30px;
  background: #fff;
  padding: 15px;
  border-radius: 12px;
  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
}

body.dark .chart-container {
  background: #1f1f2f;
}

    </style>
  </head>
  <body>
    <div class="container">
      <div class="bank-card">
        <div class="header">
          <h2>Bank Account</h2>
          <button class="toggle-btn" onclick="toggleDarkMode()">
            <i class="fas fa-moon"></i>
          </button>
        </div>

        <div class="login-section" id="loginSection">
          <input type="text" id="username" placeholder="Enter your name" />
          <button onclick="login()">Login</button>
        </div>

        <div class="account-section" id="accountSection" style="display: none">
          <p class="welcome" id="welcomeUser"></p>
          <p class="account-number">Account: <strong>1234 5678 9012</strong></p>
          <p class="balance">Balance: <span id="balance">$0.00</span></p>

          <div class="btn-group">
            <button class="btn" onclick="deposit()">Deposit</button>
            <button class="btn secondary" onclick="withdraw()">Withdraw</button>
            <button class="btn logout" onclick="logout()">Logout</button>
          </div>

          <div class="form-section">
            <h3>Add Transaction</h3>
            <input type="number" id="amountInput" placeholder="Amount" />
            <select id="typeInput">
              <option value="deposit">Deposit</option>
              <option value="withdraw">Withdraw</option>
            </select>
            <select id="categoryInput">
              <option value="General">General</option>
              <option value="Food">Food</option>
              <option value="Bills">Bills</option>
              <option value="Shopping">Shopping</option>
              <option value="Others">Others</option>
            </select>
            <button onclick="addTransaction()">Add</button>
          </div>

          <div class="filter-section">
            <h3>Filter by Date</h3>
            <input
              type="month"
              id="filterMonth"
              onchange="filterTransactionsByDate()"
            />
          </div>

          <div class="history">
            <h3>Transaction History</h3>
            <ul id="historyList"></ul>
          </div>

          <div class="chart-container">
            <h3>Monthly Summary</h3>
            <canvas id="transactionChart" height="150"></canvas>
          </div>

          <div class="chart-container">
            <h3>Spending by Category</h3>
            <canvas id="categoryChart" height="150"></canvas>
          </div>
        </div>
      </div>
    </div>

    <script src="js/script.js">
            let currentBalance = 0;
      let transactions = [];
      let userName = "";
      let chart;

      function updateBalance() {
        document.getElementById("balance").textContent = `$${currentBalance.toFixed(
          2
        )}`;
        localStorage.setItem("balance", currentBalance);
      }

      function updateHistory() {
        const list = document.getElementById("historyList");
        list.innerHTML = "";
        transactions.slice(0, 10).forEach((item) => {
          const li = document.createElement("li");
          li.textContent = item.text;
          list.appendChild(li);
        });
        localStorage.setItem("transactions", JSON.stringify(transactions));
        updateChart();
      }

      function deposit() {
        const amount = parseFloat(prompt("Enter deposit amount:"));
        if (!isNaN(amount) && amount > 0) {
          currentBalance += amount;
          transactions.unshift({
            text: `Deposited $${amount.toFixed(2)}`,
            type: "deposit",
            amount,
          });
          updateBalance();
          updateHistory();
        } else {
          alert("Invalid amount!");
        }
      }

      function withdraw() {
        const amount = parseFloat(prompt("Enter withdrawal amount:"));
        if (!isNaN(amount) && amount > 0) {
          if (amount <= currentBalance) {
            currentBalance -= amount;
            transactions.unshift({
              text: `Withdrew $${amount.toFixed(2)}`,
              type: "withdraw",
              amount,
            });
            updateBalance();
            updateHistory();
          } else {
            alert("Insufficient balance!");
          }
        } else {
          alert("Invalid amount!");
        }
      }

      function toggleDarkMode() {
        document.body.classList.toggle("dark");
        localStorage.setItem("darkMode", document.body.classList.contains("dark"));
      }

      function login() {
        const nameInput = document.getElementById("username").value.trim();
        if (nameInput !== "") {
          userName = nameInput;
          localStorage.setItem("userName", userName);
          document.getElementById(
            "welcomeUser"
          ).textContent = `Welcome, ${userName}!`;
          document.getElementById("loginSection").style.display = "none";
          document.getElementById("accountSection").style.display = "block";
          updateBalance();
          updateHistory();
        } else {
          alert("Please enter your name.");
        }
      }

      function logout() {
        if (confirm("Are you sure you want to logout?")) {
          localStorage.clear();
          currentBalance = 0;
          transactions = [];
          updateBalance();
          updateHistory();
          document.getElementById("accountSection").style.display = "none";
          document.getElementById("loginSection").style.display = "block";
          document.getElementById("username").value = "";
        }
      }

      function updateChart() {
        const depositSum = transactions
          .filter((t) => t.type === "deposit")
          .reduce((acc, t) => acc + t.amount, 0);
        const withdrawSum = transactions
          .filter((t) => t.type === "withdraw")
          .reduce((acc, t) => acc + t.amount, 0);

        if (!chart) {
          const ctx = document.getElementById("transactionChart").getContext("2d");
          chart = new Chart(ctx, {
            type: "bar",
            data: {
              labels: ["Deposits", "Withdrawals"],
              datasets: [
                {
                  label: "Amount ($)",
                  data: [depositSum, withdrawSum],
                  backgroundColor: ["#2e8b57", "#d9534f"],
                },
              ],
            },
            options: {
              responsive: true,
              scales: {
                y: {
                  beginAtZero: true,
                },
              },
            },
          });
        } else {
          chart.data.datasets[0].data = [depositSum, withdrawSum];
          chart.update();
        }
      }

      // Load saved data
      window.onload = () => {
        if (localStorage.getItem("userName")) {
          userName = localStorage.getItem("userName");
          currentBalance = parseFloat(localStorage.getItem("balance")) || 0;
          transactions = JSON.parse(localStorage.getItem("transactions")) || [];
          document.getElementById(
            "welcomeUser"
          ).textContent = `Welcome, ${userName}!`;
          document.getElementById("loginSection").style.display = "none";
          document.getElementById("accountSection").style.display = "block";
          updateBalance();
          updateHistory();
        }

        if (localStorage.getItem("darkMode") === "true") {
          document.body.classList.add("dark");
        }
      };

      function toggleDarkMode() {
        document.body.classList.toggle("dark");
        isDark = !isDark;

        const icon = document.querySelector(".toggle-btn i");
        icon.classList.toggle("fa-moon");
        icon.classList.toggle("fa-sun");
      }
      const http = require("http");
      const server = http.createServer((req, res) => {
        res.write("hello sir");
        res.end("Hello, World!\n");
      });
      server.listen(8080);
      const fetchApi = () => {
        return fetch("https://api.example.com/data")
          .then((response) => {
            if (!response.ok) {
              throw new Error("Network response was not ok");
            }
            return response.json();
          })
          .catch((error) => {
            console.error(
              "There has been a problem with your fetch operation:",
              error
            );
          });
      };
    </script>
  </body>
</html>
